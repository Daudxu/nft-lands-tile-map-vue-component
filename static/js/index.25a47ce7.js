(function(t){function e(e){for(var n,r,s=e[0],o=e[1],c=e[2],h=0,d=[];h<s.length;h++)r=s[h],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);u&&u(e);while(d.length)d.shift()();return l.push.apply(l,c||[]),i()}function i(){for(var t,e=0;e<l.length;e++){for(var i=l[e],n=!0,s=1;s<i.length;s++){var o=i[s];0!==a[o]&&(n=!1)}n&&(l.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},a={index:0},l=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=o;l.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("c31f")},"2a9d":function(t,e,i){"use strict";i("d82e")},"42b1":function(t,e,i){"use strict";i("f381")},c31f:function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("HelloWorld",{attrs:{msg:" vue lands tile map"}})},l=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hello"},[i("h1",[t._v(t._s(t.msg))]),i("p",[i("span",[t._v(" Current coordinates "+t._s(t.x)+","+t._s(t.y))])]),i("h5",[i("span",[i("button",{on:{click:t.handleClickFilter}},[t._v(" click Filter")])])]),i("div",{staticStyle:{display:"flex","justify-content":"center","margin-top":"20px"}},[i("vue-lands-tile-map",{ref:"landsTileMapRef",attrs:{tileMapMapmatrix:t.tileMapMapmatrix,tiledDigitalColormap:t.tiledDigitalColormap,tileSize:t.tileSize,startPaintingX:t.startPaintingX,startPaintingY:t.startPaintingY},on:{handleClickTile:t.handleClickTile,test:t.ceshi}})],1)])},s=[],o={name:"HelloWorld",props:{msg:String},data:function(){return{tileMapMapmatrix:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,0,1,1,1,0,1,1,1,0,0,1,1,1,0],[0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,0,1,0],[0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,0,1,0],[0,1,1,1,0,1,0,1,0,1,1,1,0,0,1,1,1,0],[0,1,0,0,0,1,0,1,0,1,0,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,1,0,1,0,0,0,0,1,0,0,0],[0,1,1,1,0,1,1,1,0,1,1,1,0,0,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],tileMapMapmatrixToc:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,1,0,0,0,1,0,1,1,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0],[0,0,1,1,1,0,0,0,1,0,1,1,1,0,0,0,0,0],[0,0,1,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0],[0,0,1,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0],[0,0,1,1,1,0,1,0,1,0,1,1,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],tiledDigitalColormap:[{0:"#138535"},{1:"#101566"},{2:"#0070c0"}],tileSize:30,x:0,y:0,flag:!0,startPaintingX:window.innerWidth/2-288,startPaintingY:20}},methods:{ceshi:function(){console.log("ceshi")},handleClickTile:function(t){"undefined"!==typeof this.tileMapMapmatrix[t.clickY][t.clickX]?(this.x=t.x,this.y=t.y):(this.x="",this.y="")},handleClickFilter:function(){var t=this.tileMapMapmatrix,e=this.flag;e?(t=this.$refs.landsTileMapRef.blockCoverage(t,this.tileMapMapmatrixToc),e=!1):e=!0,this.flag=e,this.$refs.landsTileMapRef.handleClickAssignRender(t)}}},c=o,u=(i("2a9d"),i("2877")),h=Object(u["a"])(c,r,s,!1,null,"dc89c8f2",null),d=h.exports,f={name:"App",components:{HelloWorld:d}},p=f,m=(i("42b1"),Object(u["a"])(p,a,l,!1,null,null,null)),g=m.exports,v=i("5530"),x=(i("d81d"),i("b0c0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hg-landsTileMap-wrapper"},[i("canvas",{ref:"titleMapCanvas",staticClass:"titleMapCanvas",style:{background:t.canvasBgColor},attrs:{id:"titleMapCanvas",width:t.canvasW,height:t.canvasH}})])}),y=[],w=i("1da1"),b=(i("96cf"),i("a9e3"),i("d3b7"),i("159b"),{name:"VueLandsTileMap",props:{tileMapMapmatrix:{type:Array,default:function(){return[]}},tileMapBlockMapmatrix:{type:Array,default:function(){return[]}},tiledDigitalColormap:{type:Array,default:function(){return[]}},canvasWidth:{type:Number,default:window.innerWidth},canvasHeight:{type:Number,default:window.innerHeight},tileSize:{type:Number,default:32},tileScale:{type:Number,default:1},startPaintingX:{type:Number,default:0},startPaintingY:{type:Number,default:0},gridLineColor:{type:String,default:"#c8efd4"},gridDefaultTileColor:{type:String,default:"#ffffff"},canvasBgColor:{type:String,default:"#acb8e9"},xyAxisPosition:{type:String,default:"left-top"},debug:{type:Boolean,default:!1}},data:function(){return{myCanvas:null,ctx:null,map:[],paintingX:this.startPaintingX,paintingY:this.startPaintingY,size:this.tileSize,scale:this.tileScale,canvasW:this.canvasWidth,canvasH:this.canvasHeight,model:{},xyAxisPositionList:["left-top","left-middle","left-bottom","middle-top","middle-middle","middle-bottom","right-top","right-middle","right-bottom"],matrixWidth:0,matrixHeight:0}},watch:{},mounted:function(){if(this.myCanvas=this.$refs.titleMapCanvas,this.ctx=this.myCanvas.getContext("2d"),this.tileMapMapmatrix.length>0){var t=this.clone(this.tileMapMapmatrix);this.tileMapBlockMapmatrix.length>0&&(t=this.blockCoverage(t,this.tileMapBlockMapmatrix)),this.drawImage(t),this.map=this.tileMapMapmatrix,this.canvasEventsInit();var e=this;window.onresize=function(){var t=window.innerWidth,i=window.innerHeight;e.resizeCanvas(t,i)}}},methods:{resizeCanvas:function(t,e){var i=this;this.canvasW=t,this.canvasH=e;var n=this.ctx.getImageData(0,0,this.myCanvas.width,this.myCanvas.height);this.myCanvas.width=this.canvasW,this.myCanvas.height=this.canvasH,setTimeout((function(){i.ctx.putImageData(n,0,0)}),0)},drawImage:function(t){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function i(){var n,a,l,r,s,o,c,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:for(n=e,n.matrixWidth=t.length,n.matrixHeight=t[0].length,n.ctx.clearRect(0,0,n.myCanvas.width,n.myCanvas.height),e.ctx.lineWidth=1,e.ctx.strokeStyle=e.gridLineColor,e.ctx.beginPath(),a=0;a<t.length;a++)for(l=0;l<t[a].length;l++)r=t[a][l],s=e.getGridTileColor(r),"undefined"!==typeof e.model.SizeimgX&&n.model.SizeimgX===l&&n.model.SizeimgY===a&&(s="#3704ff"),e.ctx.fillStyle=s,o=e.paintingX+l*e.tileSize*e.scale,c=e.paintingY+a*e.tileSize*e.scale,e.ctx.fillRect(o,c,1*e.tileSize*e.scale,1*e.tileSize*e.scale),e.ctx.rect(o,c,1*e.tileSize*e.scale,1*e.tileSize*e.scale),e.ctx.stroke();u=document.createElement("canvas"),e.ctx.drawImage(u,0,0),e.myCanvas.addEventListener("click",e.handleClickTile);case 11:case"end":return i.stop()}}),i)})))()},canvasEventsInit:function(){var t=this,e=t.myCanvas;e.onmousedown=function(i){var n=t.paintingX,a=t.paintingY,l={x:i.clientX,y:i.clientY};e.onmousemove=function(i){e.style.cursor="move";var r=2*(i.clientX-l.x)+n,s=2*(i.clientY-l.y)+a;t.paintingX=r,t.paintingY=s,t.drawImage(t.map)},e.onmouseup=function(){e.onmousemove=null,e.onmouseup=null,e.style.cursor="default"}},e.onmousewheel=e.onwheel=function(e){var i=e.wheelDelta?e.wheelDelta:-40*e.deltaY;return i>0?t.scale<=1.1&&(t.scale+=.1):t.scale>=.9&&(t.scale-=.1),t.drawImage(t.map),e.preventDefault&&e.preventDefault(),!1}},handleClickTile:function(t){var e=Math.floor((t.offsetX-this.paintingX)/(this.size*this.scale)),i=Math.floor((t.offsetY-this.paintingY)/(this.size*this.scale));this.$set(this.model,"SizeimgX",e),this.$set(this.model,"SizeimgY",i),this.drawImage(this.map);var n=this.coordinateAxisConversion(e,i);this.$emit("handleClickTile",{clickX:e,clickY:i,x:n.clickX,y:n.clickY,event:t})},coordinateAxisConversion:function(t,e){var i=this.xyAxisPosition,n=this.matrixWidth,a=this.matrixHeight,l=null;if("left-top"===i)l={clickX:t,clickY:e};else if("left-middle"===i){var r=0,s=Math.ceil(a/2);l=this.getXYAxis(r,s,t,e)}else if("left-bottom"===i){var o=0,c=a;l=this.getXYAxis(o,c,t,e)}else if("middle-top"===i){var u=Math.ceil(n/2),h=0;l=this.getXYAxis(u,h,t,e)}else if("middle-bottom"===i){var d=Math.ceil(n/2),f=a;l=this.getXYAxis(d,f,t,e)}else if("right-top"===i){var p=n,m=0;l=this.getXYAxis(p,m,t,e)}else if("right-middle"===i){var g=n,v=Math.ceil(a/2);l=this.getXYAxis(g,v,t,e)}else if("right-bottom"===i){var x=n,y=a;l=this.getXYAxis(x,y,t,e)}else{var w=Math.ceil(n/2),b=Math.ceil(a/2);l=this.getXYAxis(w,b,t,e)}return{clickX:l.clickX,clickY:l.clickY}},getXYAxis:function(t,e,i,n){var a=i-t,l=n-e;return{clickX:a,clickY:l}},handleClickAssignRender:function(t){this.nmp=t,this.$set(this,"map",t),this.drawImage(this.nmp)},blockCoverage:function(t,e){for(var i=this.clone(t),n=0;n<i.length;n++)for(var a=0;a<i[n].length;a++)0!==e[n][a]&&(i[n][a]=e[n][a]);return i},clone:function(t){var e;if(t instanceof Array){e=[];var i=t.length;while(i--)e[i]=this.clone(t[i]);return e}if(t instanceof Object){for(var n in e={},t)e[n]=this.clone(t[n]);return e}return t},getGridTileColor:function(t){var e=this.gridDefaultTileColor;return this.tiledDigitalColormap.forEach((function(i){"undefined"!==typeof i[t]&&i[t]&&(e=i[t])})),e}}}),C=b,M=Object(u["a"])(C,x,y,!1,null,null,null),k=M.exports;k.install=function(t){t.component(k.name,k)};var X=k,Y=[X],S=function t(e){t.installed||(t.installed=!0,Y.map((function(t){e.component(t.name,t)})))};"undefined"!==typeof window&&window.Vue&&S(window.Vue);var z=Object(v["a"])({install:S},Y);n["a"].config.productionTip=!1,n["a"].use(z),new n["a"]({render:function(t){return t(g)}}).$mount("#app")},d82e:function(t,e,i){},f381:function(t,e,i){}});
//# sourceMappingURL=index.25a47ce7.js.map